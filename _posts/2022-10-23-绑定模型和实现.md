---
layout: post
title:  "领域驱动-绑定模型与实现"
date:   2022-10-23 16:50:34 +0800
categories: 领域驱动设计
---
* 目录
{:toc #markdown-toc}

# 领域驱动设计概念
* 分析工作
	分析工作主要抓住领域内的基础概念，使用易于理解和易于表达的方式进行描述。
* 设计工作
	设计工作需要指定一套可以由项目中使用的编程工具创建的主键，使项目可以在目标部署环境中有效运行，并且能够正确解决应用程序所遇到的问题。
* 领域驱动设计
	* 想要实现的目的
		寻求一种能够将分析工作和设计工作相结合的一种模型设计方式，程序设计中的每个对象都反应了模型中所描述的相应概念,避免将分析工作和设计工作分离，导致在实际项目开发活动中产生分期，分析和设计活动无法将所获得的知识共享。
	* 对于团队的要求
		任何参与建模的技术人员，不管在项目中的主要职责是什么，都必须花时间了解代码。任何负责修改代码的人员则必须学会用代码来表达模型。每一个开发人员必须不不同程度地参与模型讨论并且与领域专家保持练习。参与不同工作的人都必须有意识地通过Ubiquitous Language 与接触代码的人及时交换关于模型的想法。
# 领域驱动设计的构造块

## 分层架构
1. 分层作用
	分层的价值在于每一层都只代表程序中的某一特定方面，这种限制使得每个方面的设计都要更具内聚性，更容易解释。
2. 分层设计
	 1. 基本概念
		在每一层分别进行设计，使其具有内聚性并且只依赖与它的下层。采用标准的架构模式，只与上层进行松散的耦合。将所有与领域模型相关的代码放在一个层中，并把它与用户界面层，应用层以及基础设施层的代码分开。领域对象应该将重点放在如何表达领域模型上，而不需要考虑自己的显示和存储问题，也无需管理应用任务等内容。这使得模型的含义足够丰富，结构足够清晰，可以捕捉到基本的业务知识，并有效地使用这些知识。	
3.  经典分层
	* 用户界面层(UI)
		负责向用户显示信息和解释用户指令
	*  应用层(Controller)
		定义软件需要完成的任务，并且只会表达领域概念的对象来解决问题。这一层所负责的工作对业务来说意义重大，也是与其他系统的应用层进行交互的必要渠道。
		应用层要尽量简单，不包含业务规则或者知识，而职位下一层中的领域对象协调任务，分配工作，使他们互相协作。它没有反应业务情况的状态，但是却可以具有另外一种状态，为用户或程序显示某个任务的进度。
	*  领域层(模型层。业务Servicjjje)
		负责表达业务概念，业务状态信息以及业务规则。尽管保存业务状态的技术细节是由基础设施层实现，但是反应业务情况的状态是由本层控制并且使用的，领域层是业务软件的核心。
	* 基础设施层(业务DAO,各种工具组件等)
		 为上面各层提供通用的技术能力：为应用层传递信息，为领域层提供持久化机制，为用户界面绘制屏幕主键，等等。基础设施层通过架构框架来支持4个层次间的交互模式。
4.  分层关联
	* 各层之间是松散连接的，层与层的依赖关系只能是**单向** 的。商城可以直接使用或操作下层元素，方法时通过调用下层元素的公共接口，保持对下层元素的引用(至少是暂时的),以及采用常规的交互手段。而如果下层元素需要与商城元素进行通信(不只是回应直接查询),则需要采用另一种通信机制，使用架构模式来连接上下层，如**回调模式**或**Observers模式**

5.  架构框架选择
	* 架构选取误区
		好的框架架构技能解决负责技术问题，也能让领域开发人员集中精力去表达模型，而不用考虑其他问题。然而使用框架很容易为项目造成其他障碍:要么是设定了太多的假设，减小了领域设计的可选范围；要么是需要实现太多东西，影响开发进度。
	
	* 不要一味追求完全之策 
		选取使用框架时，应当明白其使用目的:建立一种可以表达领域模型的实现并且用它来解决重要问题。项目团队必须想方设法让框架满足这些需求，即使这意味着抛弃框架中一些功能。不妄求完全之策，只要选择性的运用框架来解决难点问题，就可以避免框架的许多不足之处。明智和审慎的选择框架中最具价值的功能能够减少程序实现和框架之间的耦合，使随后的设计更加灵活。更重要的是，现在许多框架的用法都极其复杂，这种简化方式有助于保持业务对象的可读性，使其富有表达力。
6.  领域层的模型
		领域模型是一系列概念的集合。"领域层"则是领域模型以及所有与其直接相关的设计元素的表现，它由业务逻辑的设计与实现组成，在DDD中，领域层的软件构造反映了模型概念。
		
## TheSmartUI “反模式"
	和DDD背道而驰的软件开发模式。
1. 经典场景
	在用户界面实现所有业务逻辑。将应用程序分成小的功能模块，分别将它们实现成用户界面，并在其中嵌入业务规则。用关系数据库作为共享的数据存储库。使用自动化程度最高的用户界面创建工具和可用的可视化编程工具。
	* 优点
		1. 效率高，能在短时间内实现简单的应用程序
		2. 能力较差的开发人员可以几乎不经过培训就采用它
		3. 甚至可以客服需求分析上的不足，只要把原型发布给用户，然后根据用户反馈快速修改软件产品即可
		4. 程序之间彼此独立，这样可以相对准确的安排小模块交付的日期。额外扩展简单功能也很容易
		5. 可以很顺利使用关系数据库，能够提供数据集的整合
		6. 可以使用第四代语言工具(只需告诉计算机怎么做，而不需要具体实现如SQL)
		7. 移交程序之后，维护程序员可以迅速重写他们不明白的代码段，因为修改代码只会影响到代码所在的用户界面
	* 缺点
		1. 不通过数据库很难集成应用模块
		2. 没有对行为的重用，也没有对业务问题的抽象。每当操作用到业务规则时，都必须重复这些规则
		3. 快速的原型建立和迭代很快会达到其极限，因为抽象的缺乏限制了重构的选择
		4. 复杂的功能很快会让你无所适从，所以程序的扩展只能是增加简单的应用模块，没有很好的办法来实现更丰富的功能
